resources:
#NPM application
  - name: pe_source_code
    type: GitRepo
    configuration:
      gitProvider: peGitHub
      path: davidpinhas/simple-reactjs-app
      branches:
        # Specifies which branches will trigger dependent steps
        include: master

  - name: npm_app_build_info
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory
      buildName: npm_app_pipeline
      buildNumber: '${run_number}'

  - name: npm_app_build_promote_to_staging
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory
      buildName: npm_app_pipeline
      buildNumber: '${run_number}'

  - name: npm_app_build_info_propoted_prod
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory
      buildName: npm_app_pipeline
      buildNumber: '${run_number}'

# Dockerizing NPM application
#  - name: npm_app_package
#    type: FileSpec
#    configuration:
#      sourceArtifactory: artifactory
#      pattern: 'pe-npm-local/simple-reactjs-app/*/simple-reactjs-app-*.tgz'
#      target: package/simple-reactjs-app-*.tgz
#      flat: true

  - name: docker_app_build_info
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory
      buildName: docker_app_pipeline
      buildNumber: '${run_number}'

  - name: docker_app_build_info_promoted_prod
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory
      buildName: docker_app
      buildNumber: '${run_number}'

  - name: helm_chart_npm_app_resource
    type: HelmChart
    configuration:
      sourceArtifactory: artifactory
      repository: pe-helm
      chart: helm_chart_npm_app_chart
      version: 1.0.'${run_number}'
